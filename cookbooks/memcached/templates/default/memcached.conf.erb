# Memcached settings
#
# Managed by RightScale
# DO NOT EDIT BY HAND
#
# System-wide configuration file for memcached service
#

PORT="<%=@port%>"
USER="<%=@user%>"
MAXCONN="<%=@connection_limit%>"
CACHESIZE="<%=@memtotal%>"
OPTIONS="-t <%=@threads%> <%=@extra_options%>"



# Log memcached's output to /var/log/memcached
# logfile /var/log/memcached.log
# Be verbose
# -v
# Be even more verbose (print client commands as well)
# -vv
# Start with a cap of 64 megs of memory. It's reasonable, and the daemon default
# Note that the daemon will grow to this size, but does not start out holding this much
# memory
# -m 64
# Default connection port is 11211
# -p 11211
# Run the daemon as root. The start-memcached will default to running as root if no
# -u command is present in this config file
# -u memcache
# Specify which IP address to listen on. The default is to listen on all IP addresses
# This parameter is one of the only security measures that memcached has, so make sure
# it's listening on a firewalled interface.
# -l 127.0.0.1
# Limit the number of simultaneous incoming connections. The daemon default is 1024
# -c 1024
# Lock down all paged memory. Consult with the README and homepage before you do this
# -k
# Return error when memory is exhausted (rather than removing items)
#-M
# Maximize core file limit
# -r


#  -p <num>      TCP port number to listen on (default: 11211)
#  -U <num>      UDP port number to listen on (default: 11211, 0 is off)
#  -s <file>     UNIX socket path to listen on (disables network support)
#  -a <mask>     access mask for UNIX socket, in octal (default: 0700)
#  -l <ip_addr>  interface to listen on (default: INADDR_ANY, all addresses)
#  -d            run as a daemon
#  -r            maximize core file limit
#  -u <username> assume identity of <username> (only when run as root)
#  -m <num>      max memory to use for items in megabytes (default: 64 MB)
#  -M            return error on memory exhausted (rather than removing items)
#  -c <num>      max simultaneous connections (default: 1024)
#  -k            lock down all paged memory.  Note that there is a
#  limit on how much memory you may lock.  Trying to
#  allocate more than that would fail, so be sure you
#  set the limit correctly for the user you started
#  the daemon with (not for \-u <username> user;
#  under sh this is done with 'ulimit -S -l NUM_KB').
#  -v            verbose (print errors/warnings while in event loop)
#  -vv           very verbose (also print client commands/reponses)
#  -vvv          extremely verbose (also print internal state transitions)
#  -h            print this help and exit
#  -i            print memcached and libevent license
#  -P <file>     save PID in <file>, only used with -d option
#  -f <factor>   chunk size growth factor (default: 1.25)
#  -n <bytes>    minimum space allocated for key+value+flags (default: 48)
#  -L            Try to use large memory pages (if available). Increasing
#  the memory page size could reduce the number of TLB misses
#  and improve the performance. In order to get large pages
#  from the OS, memcached will allocate the total item-cache
#  in one large chunk.
#  -D <char>     Use <char> as the delimiter between key prefixes and IDs.
#  This is used for per-prefix stats reporting. The default is
#  ":" (colon). If this option is specified, stats collection
#  is turned on automatically; if not, then it may be turned on
#  by sending the "stats detail on" command to the server.
#  -t <num>      number of threads to use (default: 4)
#  -R            Maximum number of requests per event, limits the number of
#  requests process for a given connection to prevent
#  starvation (default: 20)
#  -C            Disable use of CAS
#  -b            Set the backlog queue limit (default: 1024)
#  -B            Binding protocol - one of ascii, binary, or auto (default)
#  -I            Override the size of each slab page. Adjusts max item size

#  PORTS="11216 11217"
#  USER=memcached
#  basedir="/usr/local/memcached"
#  MAXCONN=1024
#  OPTIONS=""
#  INSTANCES=([11216]="session" [11217]="userdata")
#  PIDS=([11216]="$basedir/var/run/sohaphimdetails.pid" [11217]="$basedir/var/run/sohamuzik-top.pid")
#  MEMORYS=([11216]="1024" [11217]="2048")
#  FACTORS=([11216]="1.25" [11217]="1.125")
#
#  RETVAL=0
#  prog="memcached"
#  cmd="/usr/local/memcached/bin/memcached"
#  user="memcached"
#  ip="192.168.6.66"
#  peer="192.168.6.28"
#  max_conn=2048
#  max_memory=512
#  threads=8